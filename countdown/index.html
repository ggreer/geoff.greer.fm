---
layout: standalone
status: publish
title: Countdown
stylesheet: countdown
---

<div class="countdown_display">
  <div class="title">
    Countdown <span class="when"></span>
  </div>
  <div class="digits">
    <div class="digit">
      <div class="t">T</div>
    </div>
    <div class="digit">
      <div class="sign"></div>
      <div class="plus"></div>
    </div>
  </div>
  <div class="digits hour">
    <div class="digit">
      <div class="segment a">
        <div class="bottom"></div>
      </div>
      <div class="segment b">
        <div class="left"></div>
      </div>
      <div class="segment c">
        <div class="left"></div>
      </div>
      <div class="segment d">
        <div class="top"></div>
      </div>
      <div class="segment e">
        <div class="right"></div>
      </div>
      <div class="segment f">
        <div class="right"></div>
      </div>
      <div class="segment g">
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>
    <div class="digit">
      <div class="segment a">
        <div class="bottom"></div>
      </div>
      <div class="segment b">
        <div class="left"></div>
      </div>
      <div class="segment c">
        <div class="left"></div>
      </div>
      <div class="segment d">
        <div class="top"></div>
      </div>
      <div class="segment e">
        <div class="right"></div>
      </div>
      <div class="segment f">
        <div class="right"></div>
      </div>
      <div class="segment g">
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>
  </div>
  <div class="colon">
    <div class="top"></div>
    <div class="bottom"></div>
  </div>
  <div class="digits minute">
    <div class="digit">
      <div class="segment a">
        <div class="bottom"></div>
      </div>
      <div class="segment b">
        <div class="left"></div>
      </div>
      <div class="segment c">
        <div class="left"></div>
      </div>
      <div class="segment d">
        <div class="top"></div>
      </div>
      <div class="segment e">
        <div class="right"></div>
      </div>
      <div class="segment f">
        <div class="right"></div>
      </div>
      <div class="segment g">
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>
    <div class="digit">
      <div class="segment a">
        <div class="bottom"></div>
      </div>
      <div class="segment b">
        <div class="left"></div>
      </div>
      <div class="segment c">
        <div class="left"></div>
      </div>
      <div class="segment d">
        <div class="top"></div>
      </div>
      <div class="segment e">
        <div class="right"></div>
      </div>
      <div class="segment f">
        <div class="right"></div>
      </div>
      <div class="segment g">
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>
  </div>
  <div class="colon">
    <div class="top"></div>
    <div class="bottom"></div>
  </div>
  <div class="digits second">
    <div class="digit">
      <div class="segment a">
        <div class="bottom"></div>
      </div>
      <div class="segment b">
        <div class="left"></div>
      </div>
      <div class="segment c">
        <div class="left"></div>
      </div>
      <div class="segment d">
        <div class="top"></div>
      </div>
      <div class="segment e">
        <div class="right"></div>
      </div>
      <div class="segment f">
        <div class="right"></div>
      </div>
      <div class="segment g">
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>
    <div class="digit">
      <div class="segment a">
        <div class="bottom"></div>
      </div>
      <div class="segment b">
        <div class="left"></div>
      </div>
      <div class="segment c">
        <div class="left"></div>
      </div>
      <div class="segment d">
        <div class="top"></div>
      </div>
      <div class="segment e">
        <div class="right"></div>
      </div>
      <div class="segment f">
        <div class="right"></div>
      </div>
      <div class="segment g">
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>
  </div>
  <div class="decimal">
    <div class="bottom"></div>
  </div>
  <div class="digits millisecond">
    <div class="digit">
      <div class="segment a">
        <div class="bottom"></div>
      </div>
      <div class="segment b">
        <div class="left"></div>
      </div>
      <div class="segment c">
        <div class="left"></div>
      </div>
      <div class="segment d">
        <div class="top"></div>
      </div>
      <div class="segment e">
        <div class="right"></div>
      </div>
      <div class="segment f">
        <div class="right"></div>
      </div>
      <div class="segment g">
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>
    <div class="digit">
      <div class="segment a">
        <div class="bottom"></div>
      </div>
      <div class="segment b">
        <div class="left"></div>
      </div>
      <div class="segment c">
        <div class="left"></div>
      </div>
      <div class="segment d">
        <div class="top"></div>
      </div>
      <div class="segment e">
        <div class="right"></div>
      </div>
      <div class="segment f">
        <div class="right"></div>
      </div>
      <div class="segment g">
        <div class="top"></div>
        <div class="bottom"></div>
      </div>
    </div>
  </div>

</div>

<script type="text/javascript">
var hours,
  hours_0_s,
  hours_1_s,
  milliseconds,
  milliseconds_0_s,
  milliseconds_1_s,
  minutes,
  minutes_0_s,
  minutes_1_s,
  plus,
  seconds,
  seconds_0_s,
  seconds_1_s,
  when,
  segment_lookup,
  sign;

segment_lookup = [
  [1, 1, 1, 1, 1, 1, 0],
  [0, 1, 1, 0, 0, 0, 0],
  [1, 1, 0, 1, 1, 0, 1],
  [1, 1, 1, 1, 0, 0, 1],
  [0, 1, 1, 0, 0, 1, 1],
  [1, 0, 1, 1, 0, 1, 1],
  [1, 0, 1, 1, 1, 1, 1],
  [1, 1, 1, 0, 0, 0, 0],
  [1, 1, 1, 1, 1, 1, 1],
  [1, 1, 1, 1, 0, 1, 1],
];

if (location.hash) {
  when = new Date(location.hash.slice(1));
} else {
  when = new Date();
  when.setHours(0);
  when.setMinutes(0);
  when.setSeconds(0);
  when.setMilliseconds(0);
  when.setDate(when.getDate() + 1);
}

function lead_zero(i) {
  return i < 10 ? "0" + i : i;
}

function date_format(d) {
  var str = "";
  str += d.getFullYear() + "-" + lead_zero(d.getMonth() + 1) + "-" + lead_zero(d.getDate());
  str += " ";
  str += lead_zero(d.getHours()) + ":" + lead_zero(d.getMinutes()) + ":" + lead_zero(d.getSeconds());
  return str + " UTC";
}

document.getElementsByClassName("when")[0].innerHTML = date_format(when);

sign = document.getElementsByClassName("sign")[0];
plus = document.getElementsByClassName("plus")[0];

hours = document.getElementsByClassName("hour")[0].getElementsByClassName("digit");
hours_0_s = hours[0].getElementsByClassName("segment");
hours_1_s = hours[1].getElementsByClassName("segment");

minutes = document.getElementsByClassName("minute")[0].getElementsByClassName("digit");
minutes_0_s = minutes[0].getElementsByClassName("segment");
minutes_1_s = minutes[1].getElementsByClassName("segment");

seconds = document.getElementsByClassName("second")[0].getElementsByClassName("digit");
seconds_0_s = seconds[0].getElementsByClassName("segment");
seconds_1_s = seconds[1].getElementsByClassName("segment");

milliseconds = document.getElementsByClassName("millisecond")[0].getElementsByClassName("digit");
milliseconds_0_s = milliseconds[0].getElementsByClassName("segment");
milliseconds_1_s = milliseconds[1].getElementsByClassName("segment");

function render_digit(segments, digit) {
  var i,
    values = segment_lookup[digit];

  for (i = 0; i < values.length; i++) {
    if (values[i]) {
      segments[i].classList.add("on");
    } else {
      segments[i].classList.remove("on");
    }
  }
}

function render() {
  var now = Date.now(),
    r;

  if (now > when) {
    r = new Date(now - when);
    plus.classList.add("on");
  } else {
    r = new Date(when - now);
    plus.classList.remove("on");
  }

  render_digit(hours_0_s, Math.floor(r.getHours() / 10));
  render_digit(hours_1_s, r.getHours() % 10);

  render_digit(minutes_0_s, Math.floor(r.getMinutes() / 10));
  render_digit(minutes_1_s, r.getMinutes() % 10);

  render_digit(seconds_0_s, Math.floor(r.getSeconds() / 10));
  render_digit(seconds_1_s, r.getSeconds() % 10);

  render_digit(milliseconds_0_s, Math.floor(r.getMilliseconds() / 100));
  render_digit(milliseconds_1_s, Math.floor((r.getMilliseconds() % 100) / 10));
}

render_digit(hours_0_s, 8);
render_digit(hours_1_s, 8);
render_digit(minutes_0_s, 8);
render_digit(minutes_1_s, 8);
render_digit(seconds_0_s, 8);
render_digit(seconds_1_s, 8);
render_digit(milliseconds_0_s, 8);
render_digit(milliseconds_1_s, 8);

function rfa() {
  render();
  setTimeout(function () {
    window.requestAnimationFrame(rfa);
  }, 10);
}

setTimeout(rfa, 1000);

</script>
